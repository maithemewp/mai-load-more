{"version":3,"file":"mai-load-more.js","mappings":"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","sources":["webpack://mai-load-more/./src/mai-load-more.js"],"sourcesContent":["/**\n * Mai Load More JavaScript.\n * Handles load more functionality for archives and grids.\n */\n(function() {\n\t'use strict';\n\n\t// Get the load more entries.\n\tconst entries = document.querySelectorAll('.entries[data-load-more]');\n\n\t// Loop through the entries.\n\tentries.forEach(container => {\n\t\t// Get the button.\n\t\tconst button = container.querySelector('.mai-load-more');\n\n\t\t// Add click event listener.\n\t\tbutton?.addEventListener('click', function(e) {\n\t\t\t// Get the button text.\n\t\t\tconst buttonText = this.textContent;\n\t\t\tconst styleTag   = `<style id=\"mai-load-more-style\">@keyframes mailoadmorespin { to { transform: rotate(360deg); } }</style>`;\n\n\t\t\t// Modify the button.\n\t\t\tthis.insertAdjacentHTML('beforeBegin', styleTag);\n\t\t\tthis.innerHTML = `<span class=\"mai-load-more__text\" style=\"opacity:0;\">${buttonText}</span><span class=\"mai-load-more__loading\" style=\"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);line-height:0;\">${maiLoadMore.args.button_text_loading}</span>`;\n\t\t\tthis.disabled  = true;\n\n\t\t\t// Get the data.\n\t\t\tconst template = JSON.parse(atob(decodeURIComponent(container.dataset.template)));\n\t\t\tconst query    = JSON.parse(atob(decodeURIComponent(container.dataset.query)));\n\t\t\tconst nextPage = parseInt(container.dataset.page) + 1;\n\n\t\t\t// Set up query parameters.\n\t\t\tquery.paged = nextPage;\n\n\t\t\t// Determine if this is a term query or post query.\n\t\t\tconst action = 'term' === container.dataset.type ? 'mai_load_more_terms' : 'mai_load_more_posts';\n\n\t\t\t// Build data for AJAX request.\n\t\t\tconst data = new FormData();\n\t\t\tdata.append('action', action);\n\t\t\tdata.append('query_args', JSON.stringify(query));\n\t\t\tdata.append('template_args', JSON.stringify(template));\n\t\t\tdata.append('total_entries', container.dataset.totalEntries);\n\t\t\tdata.append('nonce', maiLoadMore.nonce);\n\n\t\t\t// Make AJAX request.\n\t\t\tfetch(maiLoadMore.ajaxUrl, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: data,\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (!res.ok) {\n\t\t\t\t\tthrow new Error('Network response was not ok');\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\t// Check if we have successful response with HTML content.\n\t\t\t\tif (data.success && data.data?.html?.trim()) {\n\t\t\t\t\t// Insert new HTML after the current entries.\n\t\t\t\t\tcontainer.querySelector('.entries-wrap')?.insertAdjacentHTML('beforeEnd', data.data.html);\n\n\t\t\t\t\t// Update page number.\n\t\t\t\t\tcontainer.dataset.page = nextPage;\n\n\t\t\t\t\t// Check if there are more posts to load.\n\t\t\t\t\tif (!data.data.has_more) {\n\t\t\t\t\t\t// Show \"no more entries\" message if configured.\n\t\t\t\t\t\tif (container.dataset.noentries && entries) {\n\t\t\t\t\t\t\tcontainer.querySelector('.entries-wrap')?.insertAdjacentHTML('afterEnd', `<p class=\"${container.dataset.noentriesClass}\">${container.dataset.noentries}</p>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Remove the button since there are no more posts.\n\t\t\t\t\t\tthis.remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Re-enable button and restore original text.\n\t\t\t\t\t\tthis.disabled    = false;\n\t\t\t\t\t\tthis.textContent = buttonText;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Remove button if no valid response.\n\t\t\t\t\tthis.remove();\n\t\t\t\t}\n\n\t\t\t\t// Remove the style tag.\n\t\t\t\tdocument.getElementById('mai-load-more-style')?.remove();\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t\t// Re-enable button and restore original text on error.\n\t\t\t\tthis.disabled    = false;\n\t\t\t\tthis.textContent = buttonText;\n\t\t\t});\n\t\t});\n\t});\n})();"],"names":["entries","document","querySelectorAll","forEach","container","button","querySelector","addEventListener","e","buttonText","textContent","styleTag","insertAdjacentHTML","innerHTML","maiLoadMore","args","button_text_loading","disabled","template","JSON","parse","atob","decodeURIComponent","dataset","query","nextPage","parseInt","page","paged","action","type","data","FormData","append","stringify","totalEntries","nonce","fetch","ajaxUrl","method","body","then","res","ok","Error","json","success","html","trim","has_more","noentries","noentriesClass","remove","getElementById","catch","error","console"],"sourceRoot":""}